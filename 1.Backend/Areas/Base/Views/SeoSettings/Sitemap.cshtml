@using PT.Domain.Model
@model SeoSettings
@addTagHelper *, Sakura.AspNetCore.Mvc.PagedList
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, PT.UI
@inject Microsoft.Extensions.Options.IOptions<PT.Domain.Model.BaseSettings> _baseSettings;

@{
    Layout = "~/Views/Shared/_Admin.cshtml";
}
    <div class="row head-v2">
        <div class="col-md-12">
            <div class="block-header">
                <h2> <i class="material-icons">settings</i> Cấu hình SEO <span class="label label-danger label-t">Quản lý trang</span></h2>
                <ol class="breadcrumb breadcrumb-t">
                    <li>
                        <a href="/Admin">
                            Trang điều khiển
                        </a>
                    </li>
                    <li class="active">
                        Quản lý trang
                    </li>
                </ol>
            </div>
        </div>
    </div>
    <div class="row clearfix">
        <div class="col-md-12" grid-index data-url="@Url.Action("Sitemap")" data-ischangeurl="true">
            <div class="row clearfix">
                <div class="col-md-12 mb-0">
                    <div grid-loading class="card card-t card-loading  mb-0" style="box-shadow: none;">
                        <div class="header bg-indigo">
                            <h4 grid-num-row class="num-t m-l-20">
                                Đang tải...
                            </h4>
                            <ul class="header-dropdown m-r--5 header-dropdown-t">
                                <li class="dropdown">
                                    <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                        <i class="material-icons">apps</i>
                                    </a>
                                    <ul class="dropdown-menu pull-left"></ul>
                                </li>
                            </ul>
                            <div class="controlOrderBy">
                                <div style="width:110px;" class="itemorder selectOrder">
                                    <select grid-input onchange="getDataGrid(1)" data-header="Loại sắp xếp" name="ordertype" class="form-control input-sm form-control-t show-tick">
                                        <option data-icon="glyphicon-sort-by-attributes" value="asc">Tăng dần</option>
                                        <option data-icon="glyphicon-sort-by-attributes-alt" value="desc">Giảm dần</option>
                                    </select>
                                </div>
                                <div style="width:200px;" class="itemorder selectOrder">
                                    <select grid-input onchange="getDataGrid(1)" data-header="Xắp xếp theo" name="orderby" class="form-control input-sm form-control-t show-tick">
                                        <option data-icon="glyphicon glyphicon-sort" value="datePosted">Xếp theo thời gian đăng</option>
                                        <option data-icon="glyphicon glyphicon-sort" value="name">Xếp theo tên hiển thị</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="body body-t">

                            <div class="search-table">
                                <div class="row">

                                    <div class="col-md-2 mb-0">
                                        <div class="form-group">
                                            <label class="form-label">Loại</label>
                                            <div class="controls">
                                                <select grid-input name="type" class="input-sm form-control-t show-tick">
                                                    <option selected value="">Tất cả</option>
                                                    @foreach (CategoryType name in Enum.GetValues(typeof(CategoryType)))
                                                    {
                                                        if(name!=CategoryType.Employee)
                                                        {
                                                            <option value="@name">@name.GetDisplayName()</option>
                                                        }
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2 mb-0">
                                        <div class="form-group">
                                            <label class="form-label">Trạng thái</label>
                                            <div class="controls">
                                                <select grid-input name="includeSitemap" class="input-sm form-control-t show-tick">
                                                    <option selected value="">Tất cả</option>
                                                    <option value="true">Hiển thị trong sitemap</option>
                                                    <option value="false">Không thị trong sitemap</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-0">
                                        <div class="form-group">
                                            <label class="form-label">Từ khóa</label>
                                            <div class="input-group mb-0">
                                                <div class="divcansearch">
                                                    <input grid-input type="text" name="key" class="form-control inputsearch keywidth text-search-table" placeholder="Nhập từ khóa">
                                                </div>
                                                <span class="input-group-addon btn-group-addon">
                                                    <button onclick="getDataGrid(1)" type="button" class="btn bg-indigo  btn-search button-search-table"><i class="material-icons">search</i></button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <partial name="_TabLanguage" model="@(new PT.Domain.Model.TabLanguageModel { Language = Context.Request.Query["language"] })" />
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover table-t">
                                    <thead>
                                        <tr>
                                            <th style="width:60px;" class="text-center">STT</th>
                                            <th>Tên trang</th>
                                            <th>Địa chỉ</th>
                                            <th>Seo Priority</th>
                                            <th>Loại</th>
                                            <th>Seo Title</th>
                                            <th>Meta Description</th>
                                            <partial name="_AdminTheadTableModule" />
                                            <th style="width:120px;">Hành động</th>
                                        </tr>
                                    </thead>
                                    <tbody grid-data></tbody>
                                </table>
                            </div>
                        <div class="pl-20 pr-20 divpagination">
                            <div class="row">
                                <div class="col-md-2 m-b-0">
                                    <div class="input-group m-b-0">
                                        <span class="input-group-addon">
                                            Bản ghi/trang
                                        </span>
                                        <div class="form-line form-line-t form-line-pagesize">
                                            <select name="limit" onchange="getDataGrid(1)" class="form-control show-tick" grid-input>
                                                <option selected value="30">30</option>
                                                <option value="40">40</option>
                                                <option value="50">50</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-10  m-b-0">
                                    <nav grid-pagination class="pg-t">
                                    </nav>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        var _page = 1;
        $("[button-popup]").toPopup();
        $("[button-submit]").toSubmit();
        getDataGrid(1, true);
        function getDataGrid(page, first = false) {
            _page = page;
            $("[grid-index]").toGridView(first, page);
        }
        function reGetDataGrid(e) {
            if (e != null) {
                _page = 1;
                $("[name='language']").val($(e).attr("data-val"));
            }
            getDataGrid(_page, false);
        }
    </script>
}
